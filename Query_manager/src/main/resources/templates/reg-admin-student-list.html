<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Registered Students</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

    <style>
        body {
            background: linear-gradient(to right, #c2e9fb, #a1c4fd); /* üå§Ô∏è Sky color */
            font-family: 'Poppins', sans-serif;
        }

        .custom-card {
            background-color: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        h3 {
            color: #004e92;
            font-weight: 600;
        }

        .badge {
            font-size: 0.85rem;
        }

        .btn-light-delete {
            background-color: #f8d7da;
            color: #842029;
            border: none;
            font-weight: 500;
        }

        .btn-light-delete:hover {
            background-color: #f1b0b7;
        }

        .input-group-text {
            background-color: #0077b6;
            color: white;
        }

        .form-control:focus {
            border-color: #0077b6;
            box-shadow: 0 0 0 0.2rem rgba(0, 119, 182, 0.25);
        }

        table th {
            background-color: #0077b6;
            color: white;
        }
    </style>
</head>
<body>

<div class="container my-5">
    <div class="custom-card">

        <!-- Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h3>üìã Registered Students
                <span class="badge bg-info text-dark ms-2" th:text="'Total: ' + ${students.size()}"></span>
            </h3>
            <div>
                <a class="btn btn-success me-2" href="/admin/add-student">‚ûï Add Student</a>
                <a class="btn btn-primary" href="/admin/studentquery">üìë View Queries</a>
				<a class="btn btn-primary" href="/admin/announcement">üìë Announcement</a>
            </div>
        </div>

        <!-- Search -->
        <form class="mb-4" method="get" action="#" onsubmit="return searchStudent();">
            <div class="input-group">
                <span class="input-group-text">üîç</span>
                <input id="searchInput" type="text" class="form-control" placeholder="Search by Enrollment No">
                <button class="btn btn-outline-secondary" type="submit">Search</button>
            </div>
        </form>

        <!-- Upload -->
        <form th:action="@{/admin/students/upload}" method="post" enctype="multipart/form-data" class="mb-4">
            <div class="input-group">
                <input type="file" name="file" class="form-control" accept=".xlsx, .xls" required>
                <button type="submit" class="btn btn-warning">‚¨ÜÔ∏è Upload Excel</button>
            </div>
        </form>

        <!-- Table -->
        <div class="table-responsive">
            <table class="table table-bordered table-striped shadow-sm text-center align-middle">
                <thead>
					 <tr>
					        <th>Full Name</th>
					        <th>Email</th>
					        <th>Enrollment No</th>
					        <th>Batch</th>
					        <th>Section</th>
					        <th>Status</th>
					        <th>Action</th>
					    </tr>
					</thead>
					<tbody id="studentsTable">
					    <tr th:each="s : ${students}">
					        <td th:text="${s.fullName}">Full Name</td>
					        <td th:text="${s.email}">Email</td>
					        <td th:text="${s.enrollmentNo}">Enrollment</td>
					        <td th:text="${s.batch}">Batch</td>
					        <td th:text="${s.section}">Section</td>
							<td>
                            <span th:if="${s.active}" class="badge bg-success">Active</span>
                            <span th:if="${!s.active}" class="badge bg-warning text-dark">Pending</span>
                        </td>
                        <td>
                            <a class="btn btn-sm btn-light-delete" th:href="@{'/admin/delete/' + ${s.id}}">Delete</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    function searchStudent() {
        const searchText = document.getElementById('searchInput').value.toLowerCase();
        const rows = document.querySelectorAll('#studentsTable tr');
        rows.forEach(row => {
            const enroll = row.cells[1].textContent.toLowerCase();
            row.style.display = enroll.includes(searchText) ? '' : 'none';
        });
        return false;
    }
</script>

</body>
</html>
